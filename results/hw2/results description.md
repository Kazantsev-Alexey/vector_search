Annoy показывает ожидаемый trade-off: при маленьком search_k алгоритм работает очень быстро, но качество заметно хуже. Увеличение search_k почти линейно повышает точность, приближая алгоритм к brute-force. Параметр n_trees также улучшает качество, но эффект слабее. 

В экспериментах с IVFPQ увеличение m с 16 до 32 при фиксированных nlist и nprobe приводит к заметному росту качества: например, для nlist=256, nprobe=8 Precision@10 увеличивается с 0.42
до 0.53 при почти неизменном QPS (~290k). При этом изменение nprobe от 1 до 128 для фиксированных nlist и m даёт гораздо меньший прирост (например, для nlist=64, m=16 Precision@10 растёт
лишь с 0.35 до 0.41). Даже лучшие конфигурации IVFPQ из предложенных параметров (Precision@10≈0.53) заметно уступают HNSW по точности, но обеспечивают QPS порядка 300k 

Я не стал дожидаться окончания тестов с HNSW потому, что результаты, практически сразу, обошли оба предыдущих алгоритма. При параметрах "algorithm": "hnsw", "M": 8, "efConstruction": 32,
"efSearch": 64 уже было получено значение Precision@10 0.91 при сохранении  QPS=4880. Основные параметры влияющие на скорость - efSearch и M. Оба приводят к снижению скорости, но и неплохому
приросту качества.